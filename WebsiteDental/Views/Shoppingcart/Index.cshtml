@section Styles {
<link href="~/assets/css/style/styleshoppingcart.css" rel="stylesheet">
}
 @model List<WebsiteDental.ViewModels.CartItemModelView> 
<!-- Main Content -->
<main class="container py-5">
    <!-- Promotional Banner -->
    <div class="shoplt-ad-banner mb-4">
        <div class="row align-items-center">
            <div class="col-md-8">
                <h4 class="mb-2">Ưu đãi đặc biệt cho thành viên LTN-Dental</h4>
                <p class="mb-0">Giảm thêm 10% cho tất cả sản phẩm khi mua từ 500.000đ - Nhập mã: LTNDENTAL10</p>
            </div>
            <div class="col-md-4 text-md-end mt-3 mt-md-0">
                <a href="#" class="btn btn-light">Đăng ký ngay</a>
            </div>
        </div>
    </div>

    <!-- Cart Content -->
    <div class="row">
        <div class="col-lg-8">
            <!-- Cart Header -->
            <div class="shoplt-cart-header d-none d-md-block">
                <div class="row">
                    <div class="col-md-6">
                        <h5 class="mb-0">Sản phẩm</h5>
                    </div>
                    <div class="col-md-2 text-center">
                        <h5 class="mb-0">Giá</h5>
                    </div>
                    <div class="col-md-2 text-center">
                        <h5 class="mb-0">Số lượng</h5>
                    </div>
                    <div class="col-md-2 text-end">
                        <h5 class="mb-0">Tổng</h5>
                    </div>
                </div>
            </div>

            <!-- Cart Items - with vertical scroll -->
            <div class="shoplt-cart-items" style="max-height: 600px; overflow-y: auto;">
                @foreach (var item in Model)
                {
                    <!-- Item 1 -->
                    <div class="shoplt-cart-item">
                        <div class="row align-items-center">
                            <div class="col-md-6 col-12 mb-3 mb-md-0">
                                <div class="d-flex align-items-center">
                                    <img src="@item.Image" alt="Bàn chải Oral-B" class="shoplt-product-img me-3">
                                    <div>
                                        <h5 class="mb-1">@item.ProductName</h5>
                                        <p class="mb-1 text-muted small">Đánh giá: @item.Rating </p>
                                        <form asp-action="RemoveFromCart" asp-controller="Shoppingcart" method="post">
                                            <input type="hidden" name="productId" value="@item.ProductId" />
                                            <button type="submit" class="btn btn-sm text-danger p-0">
                                                <i class="fas fa-trash-alt me-1"></i> Xóa
                                            </button>
                                        </form>

                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2 col-4 text-md-center">
                                <span class="d-md-none">Giá:  </span>
                                <span class="shoplt-product-price">@item.Price?.ToString("C0", new System.Globalization.CultureInfo("vi-VN"))</span>



                            </div>
                            <div class="col-md-2 col-4 text-md-center">
                                <div class="d-flex align-items-center justify-content-md-center">

                                   @*  <form asp-action="UpdateQuantity" asp-controller="Shoppingcart" method="post" class="d-flex">
                                        <input type="hidden" name="productId" value="@item.ProductId" />
                                        <button type="submit" name="action" value="decrease" class="shoplt-quantity-btn">-</button>
                                        <input type="text" name="quantity" class="shoplt-quantity-input mx-2" value="@item.Quantity" readonly>
                                        <button type="submit" name="action" value="increase" class="shoplt-quantity-btn">+</button>
                                    </form> *@
                                    <form asp-action="UpdateQuantity" asp-controller="Shoppingcart" method="post" class="d-flex">
                                        <input type="hidden" name="productId" value="@item.ProductId" />

                                        <!-- Nút giảm số lượng -->
                                        <button type="submit" name="action" value="decrease" class="shoplt-quantity-btn">-</button>

                                        <!-- Hiển thị số lượng hiện tại -->
                                        <input type="text" name="quantity" class="shoplt-quantity-input mx-2" value="@item.Quantity" readonly>

                                        <!-- Nút tăng số lượng -->
                                        <button type="submit" name="action" value="increase" class="shoplt-quantity-btn">+</button>
                                    </form>


                                </div>
                            </div>
                            <div class="col-md-2 col-4 text-end">
                                <span class="d-md-none">Tổng: </span>
                                <span class="shoplt-product-price">
                                    @((item.Price * item.Quantity)?.ToString("C0", new System.Globalization.CultureInfo("vi-VN")))
                                </span>
                            </div>
                        </div>
                    </div>          
                    
                }
               </div>
            <!-- Cart Actions -->
            <div class="row mt-4">
                <div class="col-md-6 mb-3 mb-md-0">
                    <div class="input-group">
                        <input type="text" class="form-control shoplt-promo-input" placeholder="Mã giảm giá">
                        <button class="btn btn-primary shoplt-promo-btn" type="button">Áp dụng</button>
                    </div>
                </div>
                <div class="col-md-6 text-md-end">
                    <form asp-action="ClearCart" asp-controller="Shoppingcart" method="post">
                        <button type="submit" class="btn btn-outline-secondary mb-3 ">Xóa tất cả</button>
                    </form>

                    <button class="btn btn-outline-primary">Cập nhật giỏ hàng</button>

                    <!-- Nút quay lại trang -->
                    <button class="btn btn-outline-info" onclick="window.history.back();">Quay lại trang</button>
                </div>

            </div>
        </div>

        <div class="col-lg-4 mt-4 mt-lg-0">
            <!-- Cart Summary -->
            <div class="shoplt-cart-summary">
                <h4 class="mb-4">Tóm tắt đơn hàng</h4>

                <div class="shoplt-summary-row">
                    <span>Tạm tính:</span>

                    <span>@(Convert.ToDecimal(ViewData["TotalAmount"]).ToString("C0", new System.Globalization.CultureInfo("vi-VN")))</span>


                </div>

                <div class="shoplt-summary-row">
                    <span>Giảm giá</span>
                    <span>-0 đ</span>
                </div>

                <div class="shoplt-summary-row">
                    <span>Phí vận chuyển</span>
                    <span> @(((decimal)ViewData["ShippingFee"]).ToString("C0", new System.Globalization.CultureInfo("vi-VN")))</span>

          

                </div>

                <hr>

                <div class="shoplt-summary-row fw-bold">
                    <span>Tổng thanh toán</span>
                    <span class="fs-5 shoplt-product-price">
                        @(((decimal)ViewData["TotalWithShipping"]).ToString("N0", new System.Globalization.CultureInfo("vi-VN")) + " ₫")
                    </span>

                </div>

                <button class="btn btn-primary shoplt-checkout-btn w-100 mt-3 py-2">Tiến hành thanh toán</button>
                <a href="#" class="btn shoplt-continue-btn w-100 mt-2 py-2">Tiếp tục mua sắm</a>
            </div>




            <!-- Payment Methods -->
            <div class="mt-4 p-3 border rounded">
                <h5 class="mb-3">Phương thức thanh toán</h5>
                <div class="d-flex flex-wrap">
                    <img src="https://prod-cdn.pharmacity.io/e-com/images/static-website/20240706162441-0-Visa.png" alt="Visa" class="payment-method-logo me-2 mb-2">
                    <img src="https://prod-cdn.pharmacity.io/e-com/images/static-website/20241122062454-0-napas.png" alt="Napas" class="payment-method-logo me-2 mb-2">
                    <img src="https://prod-cdn.pharmacity.io/e-com/images/static-website/20240706162729-0-ZaloPay.png" alt="ZaloPay" class="payment-method-logo me-2 mb-2">
                    <img src="https://prod-cdn.pharmacity.io/e-com/images/static-website/20240706162441-0-Momo.png" alt="Momo" class="payment-method-logo me-2 mb-2">
                    <img src="https://prod-cdn.pharmacity.io/e-com/images/static-website/20241122063240-0-apple-pay.png" alt="Momo" class="payment-method-logo me-2 mb-2">
                    <img src="https://prod-cdn.pharmacity.io/e-com/images/static-website/20240706162441-0-MasterCard.png" alt="Momo" class="payment-method-logo me-2 mb-2">
                </div>

            </div>
        </div>
    </div>

    <!-- Recommended Products -->
    <div class="mt-5">
        <h3 class="mb-4">Có thể bạn cũng thích</h3>
        <div class="row">
            <!-- Product 1 -->
            <div class="col-md-3 col-6 mb-4">
                <div class="shoplt-recommended-product position-relative">
                    <span class="shoplt-promo-badge">-10%</span>
                    <img src="/api/placeholder/200/200" alt="Chỉ nha khoa" class="img-fluid mb-3">
                    <h5>Chỉ nha khoa Oral-B</h5>
                    <div class="mb-2">
                        <span class="shoplt-product-price">50.000 đ</span>
                        <span class="shoplt-discount-price ms-2">55.000 đ</span>
                    </div>
                    <button class="btn btn-primary btn-sm w-100">Thêm vào giỏ</button>
                </div>
            </div>

            <!-- Product 2 -->
            <div class="col-md-3 col-6 mb-4">
                <div class="shoplt-recommended-product position-relative">
                    <span class="shoplt-promo-badge">-15%</span>
                    <img src="/api/placeholder/200/200" alt="Bộ chăm sóc răng" class="img-fluid mb-3">
                    <h5>Bộ chăm sóc răng miệng</h5>
                    <div class="mb-2">
                        <span class="shoplt-product-price">285.000 đ</span>
                        <span class="shoplt-discount-price ms-2">335.000 đ</span>
                    </div>
                    <button class="btn btn-primary btn-sm w-100">Thêm vào giỏ</button>
                </div>
            </div>

            <!-- Product 3 -->
            <div class="col-md-3 col-6 mb-4">
                <div class="shoplt-recommended-product position-relative">
                    <img src="/api/placeholder/200/200" alt="Kem tẩy trắng răng" class="img-fluid mb-3">
                    <h5>Kem tẩy trắng răng 3D</h5>
                    <div class="mb-2">
                        <span class="shoplt-product-price">160.000 đ</span>
                    </div>
                    <button class="btn btn-primary btn-sm w-100">Thêm vào giỏ</button>
                </div>
            </div>

            <!-- Product 4 -->
            <div class="col-md-3 col-6 mb-4">
                <div class="shoplt-recommended-product position-relative">
                    <span class="shoplt-promo-badge">Mới</span>
                    <img src="/api/placeholder/200/200" alt="Bàn chải tre" class="img-fluid mb-3">
                    <h5>Bàn chải tre sinh học</h5>
                    <div class="mb-2">
                        <span class="shoplt-product-price">75.000 đ</span>
                    </div>
                    <button class="btn btn-primary btn-sm w-100">Thêm vào giỏ</button>
                </div>
            </div>
        </div>
    </div>
</main>